---
layout: default
title: 文档索引
---

<style>
  details { margin: 8px 0; }
  summary { font-weight: bold; font-size: 1.1em; cursor: pointer; }
  .subcategory { margin-left: 1.5em; }
  .file-list { margin-left: 3em; list-style: disc; }
</style>

<h1>文档索引</h1>
<p>根据文件名自动生成索引，支持多级分类。</p>

{% assign all_files = site.static_files | where_exp: "file", "file.path contains '/notes/'" %}
{% assign sorted_files = all_files | sort: "path" %}

{% assign categories = "" | split: "" %}

{% for file in sorted_files %}
  {% assign filename = file.name | replace: '.md','' %}
  {% assign parts = filename | split: '--' %}
  {% assign depth = parts | size %}
  {% if depth == 1 %}
    {% assign cat = "其他" %}
  {% else %}
    {% assign cat = parts[0] %}
  {% endif %}
  {% assign categories = categories | push: cat %}
{% endfor %}

{% assign unique_categories = categories | uniq | sort %}

{% for category in unique_categories %}
<details>
  <summary>{{ category | capitalize }}</summary>
  <ul class="file-list">
    {% for file in sorted_files %}
      {% assign filename = file.name | replace: '.md','' %}
      {% assign parts = filename | split: '--' %}
      {% assign depth = parts | size %}
      {% if (depth == 1 and category == "其他") or (depth > 1 and parts[0] == category) %}
        <li>
          <a href="{{ file.path | replace: 'notes','' }}">
            {{ parts | last | replace: '-',' ' | capitalize }}
          </a>
        </li>
      {% endif %}
    {% endfor %}
  </ul>
</details>
{% endfor %}

