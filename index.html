---
layout: default
title: ÊñáÊ°£‰∏≠ÂøÉ
---

<style>
body{margin:0;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;display:flex;height:100vh;background:#f3f4f6;transition:background 0.3s,color 0.3s;}
body.dark{background:#111827;color:#e5e7eb;}
nav{width:260px;background:#1f2937;color:#fff;position:fixed;top:0;left:0;height:100%;overflow-y:auto;padding:0;display:flex;flex-direction:column;transition:background 0.3s,color 0.3s;}
body.dark nav{background:#111827;color:#e5e7eb;}
nav .nav-header{display:flex;align-items:center;justify-content:center;padding:0.8em 1em;background:#111827;font-weight:bold;font-size:1.1em;color:#f3f4f6;position:sticky;top:0;z-index:10;border-bottom:1px solid #2563eb;position:relative;}
#navToggle{position:absolute;left:10px;background:#2563eb;color:#fff;border:none;padding:0.3em 0.6em;border-radius:4px;cursor:pointer;z-index:20;}
.username{flex:none;margin:0 auto;white-space:nowrap;}
#themeToggle{position:absolute;right:10px;background:#2563eb;color:#fff;border:none;padding:0.3em 0.6em;border-radius:4px;cursor:pointer;}
#searchBox{width:90%;margin:0.5em auto;padding:0.4em;border-radius:4px;border:none;outline:none;font-size:0.9em;display:block;}
nav ul{list-style:none;padding-left:0;margin:0.5em 0;flex:1;}
nav li{margin:0.2em 0;}
nav li a{display:block;text-decoration:none;color:#e5e7eb;padding:0.4em 1em;border-radius:6px;transition:background 0.2s,color 0.3s;}
nav li a:hover,nav li a.active{background:#3b82f6;color:#fff;}
nav details summary{cursor:pointer;position:relative;color:#38bdf8;padding:0.4em 1em;border-radius:6px;transition:background 0.2s;}
nav details summary:hover{background:#3b82f6;color:#fff;}
nav details[open]>summary{font-weight:bold;}
nav details summary::after{content:"‚ñ∏";position:absolute;right:10px;transition:transform 0.3s ease;}
nav details[open] summary::after{transform:rotate(90deg);}
body.dark nav details summary{color:#60a5fa;}
body.dark nav details summary:hover{background:#2563eb;color:#fff;}
main{margin-left:260px;padding:1em 2em;flex:1;overflow-y:auto;position:relative;}
.article-card{display:none;background:#fff;border-radius:8px;padding:1em;margin-bottom:1em;box-shadow:0 2px 6px rgba(0,0,0,0.1);transition:all 0.2s;}
.article-card.active{display:block;}
.article-card h1,.article-card h2,.article-card h3,.article-card h4{scroll-margin-top:20px;}
#breadcrumb{margin-bottom:1em;font-size:0.9em;color:#6b7280;word-break:break-word;}
body.dark #breadcrumb{color:#9ca3af;}
#progressBarContainer{position:fixed;top:0;left:0;width:100%;height:4px;background:#d1d5db;z-index:1200;}
body.dark #progressBarContainer{background:#374151;}
#progressBar{width:0%;height:100%;background:#2563eb;transition:width 0.1s;}
#toc{position:fixed;top:50px;right:0;width:200px;max-height:80%;overflow-y:auto;padding:1em;background:#f9fafb;font-size:0.9em;}
body.dark #toc{background:#1f2937;color:#e5e7eb;}
#toc ul{list-style:none;padding-left:0;margin:0;}
#toc li{margin:0.2em 0;}
@media(max-width:768px){nav{left:-260px;transition:left 0.3s ease;z-index:1000;}nav.open{left:0;}main{margin-left:0;padding:1em;}#toc{display:none;}#navOverlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background: rgba(0,0,0,0.4);z-index:900;}}
</style>

<button id="navToggle">‚ò∞</button>
<div id="navOverlay"></div>
<div id="progressBarContainer"><div id="progressBar"></div></div>

<nav>
  <div class="nav-header">
    <span class="username">Âè∂ÊàêÈîã / Yechengfeng</span>
    <button id="themeToggle">üåô</button>
  </div>
  <input type="text" id="searchBox" placeholder="ÊêúÁ¥¢Êñá‰ª∂..." onkeyup="filterNav()">
  <div id="navListContainer"></div>
</nav>

<main id="mainContent">
  <div id="breadcrumb"></div>
  <div id="toc"></div>
  {% assign files = site.pages | where_exp:"p","p.path contains 'ÊàëÁöÑÂùöÊûú‰∫ë/note/'" | sort:"path" %}
  {% for file in files %}
    {% assign fname = file.path | split:'/' | last | replace:'.md','' %}
    <div class="article-card" id="{{ file.url | replace:'/','_' | replace:'.md','' }}">
      {{ file.content | markdownify }}
    </div>
  {% endfor %}
</main>

<script>
const main=document.getElementById('mainContent');
const nav=document.querySelector('nav');
const toggle=document.getElementById('navToggle');
const overlay=document.getElementById('navOverlay');
const breadcrumb=document.getElementById('breadcrumb');
const toc=document.getElementById('toc');
const progressBar=document.getElementById('progressBar');
const themeToggle=document.getElementById('themeToggle');

function buildTree(files){
  let tree={};
  files.forEach(f=>{
    let fname=f.path.split('/').pop().replace('.md','');
    let parts=fname.split('--');
    if(parts.length==0) parts=['ÂÖ∂‰ªñ'];
    let current=tree;
    parts.forEach((p,i)=>{
      if(!current[p]) current[p]={};
      if(i===parts.length-1) current[p]['__file__']=f.url;
      current=current[p];
    });
  });
  return tree;
}

function renderTree(node){
  let ul=document.createElement('ul');
  for(let key in node){
    if(key==='__file__') continue;
    let li=document.createElement('li');
    if(node[key]['__file__']){
      let a=document.createElement('a');
      a.href="#";
      a.textContent=key;
      a.onclick=function(e){e.preventDefault(); showArticle(node[key]['__file__'], a);}
      li.appendChild(a);
    } else {
      let details=document.createElement('details');
      details.open=true;
      let summary=document.createElement('summary');
      summary.textContent=key;
      details.appendChild(summary);
      details.appendChild(renderTree(node[key]));
      li.appendChild(details);
    }
    ul.appendChild(li);
  }
  return ul;
}

function showArticle(id, linkElem){
  var cards=document.getElementsByClassName("article-card");
  for(var i=0;i<cards.length;i++){cards[i].classList.remove("active");}
  var selected=document.getElementById(id);
  if(selected){selected.classList.add("active"); selected.scrollTop=0;}
  if(linkElem){breadcrumb.textContent=linkElem.textContent;}
  buildTOC(selected);
  var navLinks=document.querySelectorAll("#navList a");
  navLinks.forEach(a=>a.classList.remove("active"));
  if(linkElem){linkElem.classList.add("active");}
  localStorage.setItem('currentArticle', id);
  if(window.innerWidth<=768){nav.classList.remove('open'); overlay.style.display='none';}
}

function buildTOC(container){
  toc.innerHTML="";
  if(!container) return;
  let headers=container.querySelectorAll('h1,h2,h3');
  if(headers.length==0) return;
  let ul=document.createElement('ul');
  headers.forEach(h=>{
    if(!h.id) h.id='h'+Math.random().toString(36).substr(2,9);
    let li=document.createElement('li');
    let a=document.createElement('a');
    a.textContent=h.textContent;
    a.href="#"+h.id;
    a.onclick=function(e){ e.preventDefault(); h.scrollIntoView({behavior:'smooth',block:'start'}); }
    li.appendChild(a);
    ul.appendChild(li);
  });
  toc.appendChild(ul);
}

function filterNav(){
  var input=document.getElementById("searchBox").value.toLowerCase();
  document.querySelectorAll("#navListContainer li").forEach(item=>{
    item.style.display=item.textContent.toLowerCase().includes(input)?"":"none";
  });
}

function saveNavState(){
  const details=document.querySelectorAll('nav details');
  let state=[];
  details.forEach((d,i)=>state[i]=d.open);
  localStorage.setItem('navState', JSON.stringify(state));
}

function restoreNavState(){
  const details=document.querySelectorAll('nav details');
  const state=JSON.parse(localStorage.getItem('navState')||"[]");
  details.forEach((d,i)=>{if(state[i]!=undefined)d.open=state[i];});
}
document.querySelectorAll('nav details').forEach(d=>d.addEventListener('toggle', saveNavState));

toggle.addEventListener('click', ()=>{nav.classList.add('open'); overlay.style.display='block';});
overlay.addEventListener('click', ()=>{nav.classList.remove('open'); overlay.style.display='none';});

main.addEventListener('scroll', function(){
  var cards=document.getElementsByClassName('article-card');
  for(var i=0;i<cards.length;i++){
    var rect=cards[i].getBoundingClientRect();
    if(rect.top>=0 && rect.top<window.innerHeight/2){
      var id=cards[i].id;
      var navLinks=document.querySelectorAll("#navList a");
      navLinks.forEach(a=>a.classList.remove("active"));
      var activeLink=document.querySelector("#navList a[onclick*='"+id+"']");
      if(activeLink){activeLink.classList.add("active");}
      localStorage.setItem('currentArticle', id);
      break;
    }
  }
  var scrollTop=main.scrollTop;
  var scrollHeight=main.scrollHeight-main.clientHeight;
  progressBar.style.width=(scrollTop/scrollHeight*100)+"%";
});

themeToggle.addEventListener('click', ()=>{
  document.body.classList.toggle('dark');
  localStorage.setItem('theme', document.body.classList.contains('dark')?"dark":"light");
});

if(localStorage.getItem('theme')==="dark"){document.body.classList.add('dark');}

window.onload=function(){
  // ÊûÑÂª∫ÂØºËà™Ê†ë
  const files=[{% for f in files %}{path:"{{f.path}}",url:"{{f.url}}"}{% if forloop.last==false %},{% endif %}{% endfor %}];
  const tree=buildTree(files);
  const navListContainer=document.getElementById('navListContainer');
  navListContainer.appendChild(renderTree(tree));

  restoreNavState();

  var id=localStorage.getItem('currentArticle');
  var linkElem=null;
  if(id){ linkElem=document.querySelector("#navListContainer a[onclick*='"+id+"']"); }
  else { linkElem=document.querySelector("#navListContainer a"); id=linkElem.getAttribute('onclick').match(/'(.+?)'/)[1]; }
  if(linkElem){ linkElem.click(); }
}
</script>

