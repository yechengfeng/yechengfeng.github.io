---
layout: default
title: æ–‡æ¡£ä¸­å¿ƒ
---

<style>
/* åŸºç¡€å¸ƒå±€ */
body {
  margin:0;
  font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;
  display:flex;
  height:100vh;
  background:#f3f4f6;
}

/* å·¦ä¾§å¯¼èˆªæ  */
nav{
  width:260px;
  background:#1f2937;
  color:#fff;
  position:fixed;
  height:100%;
  overflow-y:auto;
  padding:1em;
  box-sizing:border-box;
}

#searchBox{
  width:100%;
  padding:0.4em;
  margin-bottom:1em;
  border-radius:4px;
  border:none;
  outline:none;
  font-size:0.9em;
}

nav ul{list-style:none;padding-left:0;margin:0.5em 0;}
nav li{margin:0.2em 0;}
nav li a{
  display:block;
  text-decoration:none;
  color:#e5e7eb;
  padding:0.25em 0.5em;
  border-radius:4px;
  transition: background 0.2s;
}
nav li a:hover, nav li a.active{background:#2563eb;color:#fff;}

nav details summary{
  cursor:pointer;
  position:relative;
  color:#38bdf8;
  padding:0.25em 0.5em;
  border-radius:4px;
}
nav details summary:hover{background:#2563eb;}
nav details[open]>summary{font-weight:bold;}
nav details ul{padding-left:1em; max-height:0; overflow:hidden; transition:max-height 0.3s ease;}
nav details[open] > ul { max-height: 1000px; }

nav details summary::marker{ content:""; } /* å»æ‰é»˜è®¤ä¸‰è§’ */
nav details summary::after{ content:"â–¸"; position:absolute; right:0; transition: transform 0.3s ease; }
nav details[open] summary::after{ transform: rotate(90deg); }

/* å³ä¾§å†…å®¹åŒº */
main{
  margin-left:260px;
  padding:1em 2em;
  flex:1;
  overflow-y:auto;
}

.article-card{
  display:none;
  background:#fff;
  border-radius:8px;
  padding:1em;
  margin-bottom:1em;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
  transition: all 0.2s;
}
.article-card.active{display:block;}
.article-card h1, .article-card h2, .article-card h3, .article-card h4 {
  scroll-margin-top: 20px;
}

/* ç§»åŠ¨ç«¯è‡ªé€‚åº” */
@media (max-width: 768px) {
  nav{
    left:-260px;
    transition:left 0.3s ease;
    z-index:1000;
  }
  nav.open{left:0;}
  main{margin-left:0; padding:1em;}
  #navToggle{
    display:block;
    position:fixed;
    top:10px; left:10px;
    background:#2563eb; color:#fff;
    border:none; padding:0.5em 1em;
    border-radius:4px; z-index:1100;
    cursor:pointer;
  }
  #navOverlay{
    display:none;
    position:fixed; top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.4);
    z-index:900;
  }
}
</style>

<!-- ç§»åŠ¨ç«¯èœå• -->
<button id="navToggle">â˜° èœå•</button>
<div id="navOverlay"></div>

<nav>
  <input type="text" id="searchBox" placeholder="æœç´¢æ–‡ä»¶..." onkeyup="filterNav()">
  <ul id="navList">
    {% assign files = site.pages | where_exp:"p","p.path contains 'æˆ‘çš„åšæœäº‘/note/'" | sort:"path" %}
    {% assign grouped = "" | split:"" %}
    {% for file in files %}
      {% assign fname = file.path | split:'/' | last | replace:'.md','' %}
      {% assign parts = fname | split:'--' %}
      {% if parts.size>1 %}{% assign first_cat = parts[0] %}{% else %}{% assign first_cat = "å…¶ä»–" %}{% endif %}
      {% assign grouped = grouped | push:first_cat %}
    {% endfor %}
    {% assign unique_cats = grouped | uniq %}
    
    {% for cat in unique_cats %}
      <li>
        <details open>
          <summary>{{ cat | capitalize }}</summary>
          <ul>
            {% for file in files %}
              {% assign fname = file.path | split:'/' | last | replace:'.md','' %}
              {% assign parts = fname | split:'--' %}
              {% assign depth = parts.size %}
              {% if depth==1 and cat=="å…¶ä»–" %}
                <li><a href="#" onclick="showArticle('{{ file.url | replace:'/','_' | replace:'.md','' }}', this)">ğŸ“„ {{ parts[0] | replace:'-',' ' | capitalize }}</a></li>
              {% elsif depth>=2 and parts[0]==cat %}
                {% if depth==2 %}
                  <li><a href="#" onclick="showArticle('{{ file.url | replace:'/','_' | replace:'.md','' }}', this)">ğŸ“„ {{ parts[1] | replace:'-',' ' | capitalize }}</a></li>
                {% else %}
                  <li>
                    <details>
                      <summary>ğŸ“‚ {{ parts[1] | replace:'-',' ' | capitalize }}</summary>
                      <ul>
                        <li><a href="#" onclick="showArticle('{{ file.url | replace:'/','_' | replace:'.md','' }}', this)">ğŸ“„ {{ parts | last | replace:'-',' ' | capitalize }}</a></li>
                      </ul>
                    </details>
                  </li>
                {% endif %}
              {% endif %}
            {% endfor %}
          </ul>
        </details>
      </li>
    {% endfor %}
  </ul>
</nav>

<main id="mainContent">
  {% for file in files %}
  {% assign fname = file.path | split:'/' | last | replace:'.md','' %}
  <div class="article-card" id="{{ file.url | replace:'/','_' | replace:'.md','' }}">
    {{ file.content | markdownify }}
  </div>
  {% endfor %}
</main>

<script>
const main=document.getElementById('mainContent');
const nav=document.querySelector('nav');
const toggle=document.getElementById('navToggle');
const overlay=document.getElementById('navOverlay');

// æ˜¾ç¤ºæ–‡ç« 
function showArticle(id, linkElem){
  var cards=document.getElementsByClassName("article-card");
  for(var i=0;i<cards.length;i++){cards[i].classList.remove("active");}
  var selected=document.getElementById(id);
  if(selected){selected.classList.add("active"); selected.scrollTop=0;}
  
  var navLinks=document.querySelectorAll("#navList a");
  navLinks.forEach(a=>a.classList.remove("active"));
  if(linkElem){linkElem.classList.add("active");}
  localStorage.setItem('currentArticle', id);

  // ç§»åŠ¨ç«¯è‡ªåŠ¨æ”¶èµ·å¯¼èˆª
  if(window.innerWidth<=768){
    nav.classList.remove('open');
    overlay.style.display='none';
  }
}

// æœç´¢å¯¼èˆª
function filterNav(){
  var input=document.getElementById("searchBox");
  var filter=input.value.toLowerCase();
  var ul=document.getElementById("navList");
  var li=ul.getElementsByTagName("li");
  for(var i=0;i<li.length;i++){
    var a=li[i].getElementsByTagName("a");
    var txtValue="";
    for(var j=0;j<a.length;j++){txtValue+=a[j].textContent||a[j].innerText;}
    li[i].style.display = txtValue.toLowerCase().indexOf(filter)>-1?"":"none";
  }
}

// ä¿å­˜æŠ˜å çŠ¶æ€
function saveNavState(){
  const details=document.querySelectorAll('nav details');
  let state=[];
  details.forEach((d,i)=>state[i]=d.open);
  localStorage.setItem('navState', JSON.stringify(state));
}

// æ¢å¤æŠ˜å çŠ¶æ€
function restoreNavState(){
  const details=document.querySelectorAll('nav details');
  const state=JSON.parse(localStorage.getItem('navState')||"[]");
  details.forEach((d,i)=>{if(state[i]!=undefined)d.open=state[i];});
}

// ç§»åŠ¨ç«¯å¯¼èˆªå¼€å…³
toggle.addEventListener('click', ()=>{
  nav.classList.add('open');
  overlay.style.display='block';
});
overlay.addEventListener('click', ()=>{
  nav.classList.remove('open');
  overlay.style.display='none';
});

// é¡µé¢åˆå§‹åŒ–
window.onload=function(){
  restoreNavState();
  var id=localStorage.getItem('currentArticle');
  var linkElem=null;
  if(id){
    linkElem=document.querySelector("#navList a[onclick*='"+id+"']");
  } else {
    linkElem=document.querySelector("#navList a");
    id=linkElem.getAttribute('onclick').match(/'(.+?)'/)[1];
  }
  if(linkElem){linkElem.click();}
}

// å·¦ä¾§æŠ˜å çŠ¶æ€ç›‘å¬
document.querySelectorAll('nav details').forEach(d=>{
  d.addEventListener('toggle', saveNavState);
});

// å³ä¾§æ»šåŠ¨åŒæ­¥å¯¼èˆªé«˜äº®
main.addEventListener('scroll', function(){
  var cards=document.getElementsByClassName('article-card');
  for(var i=0;i<cards.length;i++){
    var rect=cards[i].getBoundingClientRect();
    if(rect.top>=0 && rect.top<window.innerHeight/2){
      var id=cards[i].id;
      var navLinks=document.querySelectorAll("#navList a");
      navLinks.forEach(a=>a.classList.remove("active"));
      var activeLink=document.querySelector("#navList a[onclick*='"+id+"']");
      if(activeLink){activeLink.classList.add("active");}
      localStorage.setItem('currentArticle', id);
      break;
    }
  }
});
</script>

