<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>æˆ‘çš„åšæœäº‘æ–‡æ¡£æµè§ˆ</title>
  <style>
    body { font-family: Arial, sans-serif; background: #fafafa; padding: 20px; }
    h2 { margin-bottom: 10px; }
    ul { list-style: none; padding-left: 20px; }
    li { margin: 6px 0; }
    a { text-decoration: none; color: #007bff; }
    a:hover { text-decoration: underline; }
    .breadcrumb { margin-bottom: 16px; font-size: 14px; color: #555; }
  </style>
</head>
<body>
  <h2>ğŸ“ æˆ‘çš„åšæœäº‘</h2>
  <div class="breadcrumb" id="breadcrumb">é¦–é¡µ</div>
  <ul id="fileList"></ul>

  <script>
    const basePath = '/æˆ‘çš„åšæœäº‘/'; // âœ… æ ¹ç›®å½•æ˜¯â€œæˆ‘çš„åšæœäº‘â€
    const fileListEl = document.getElementById('fileList');
    const breadcrumbEl = document.getElementById('breadcrumb');

    // åŠ è½½æŒ‡å®šè·¯å¾„çš„å†…å®¹
    async function loadFolder(path) {
      const response = await fetch(path);
      const text = await response.text();

      const parser = new DOMParser();
      const doc = parser.parseFromString(text, 'text/html');
      const links = [...doc.querySelectorAll('a')];
      const items = links.map(a => a.getAttribute('href')).filter(h => h && h !== '../');

      const folders = [];
      const files = [];

      for (const item of items) {
        if (item.endsWith('/')) folders.push(item);
        else files.push(item);
      }

      // é¢åŒ…å±‘å¯¼èˆª
      const relative = path.replace(basePath, '');
      const parts = relative.split('/').filter(Boolean);
      breadcrumbEl.innerHTML = parts.length
        ? `<a href="#" onclick="loadFolder('${basePath}')">é¦–é¡µ</a> / ` +
          parts
            .map((p, i) => {
              const subPath = basePath + parts.slice(0, i + 1).join('/') + '/';
              return `<a href="#" onclick="loadFolder('${subPath}')">${p}</a>`;
            })
            .join(' / ')
        : 'é¦–é¡µ';

      fileListEl.innerHTML = '';

      if (folders.length > 0) {
        // æ˜¾ç¤ºæ–‡ä»¶å¤¹
        folders.forEach(folder => {
          const li = document.createElement('li');
          const folderName = folder.replace(/\/$/, '');
          li.innerHTML = `ğŸ“‚ <a href="#" onclick="loadFolder('${path + folder}')">${folderName}</a>`;
          fileListEl.appendChild(li);
        });
      } else if (files.length > 0) {
        // æ²¡æœ‰æ–‡ä»¶å¤¹æ—¶ï¼Œç”¨ -- é€»è¾‘æ˜¾ç¤ºæ–‡ä»¶
        const grouped = {};
        files.forEach(file => {
          const name = decodeURIComponent(file);
          const [prefix, suffix] = name.split('--');
          if (!grouped[prefix]) grouped[prefix] = [];
          grouped[prefix].push(suffix || '');
        });

        for (const prefix in grouped) {
          const li = document.createElement('li');
          li.innerHTML =
            `<strong>${prefix}</strong><ul>` +
            grouped[prefix]
              .map(name => `<li>${name}</li>`)
              .join('') +
            '</ul>';
          fileListEl.appendChild(li);
        }
      } else {
        fileListEl.innerHTML = '<li>ï¼ˆç©ºæ–‡ä»¶å¤¹ï¼‰</li>';
      }
    }

    // åˆå§‹åŒ–
    loadFolder(basePath);
  </script>
</body>
</html>

