<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>æˆ‘çš„åšæœäº‘æ–‡æ¡£æµè§ˆ</title>
  <style>
    body { font-family: Arial, sans-serif; background: #fafafa; padding: 20px; }
    h2 { margin-bottom: 10px; }
    ul { list-style: none; padding-left: 20px; }
    li { margin: 6px 0; }
    a { text-decoration: none; color: #007bff; }
    a:hover { text-decoration: underline; }
    .breadcrumb { margin-bottom: 16px; font-size: 14px; color: #555; }
  </style>
</head>
<body>
  <h2>ğŸ“ æˆ‘çš„åšæœäº‘</h2>
  <div class="breadcrumb" id="breadcrumb">é¦–é¡µ</div>
  <ul id="fileList"></ul>

  <script>
    const rootFolder = 'æˆ‘çš„åšæœäº‘/';
    const fileListEl = document.getElementById('fileList');
    const breadcrumbEl = document.getElementById('breadcrumb');
    let allFiles = [];

    // è¯»å– tree.txt æ–‡ä»¶ï¼Œè·å–ç›®å½•ç»“æ„
    async function loadTree() {
      const res = await fetch('tree.txt');
      const text = await res.text();
      allFiles = text.split('\n').filter(Boolean);
      showFolders(rootFolder);
    }

    function showFolders(currentPath) {
      const relative = currentPath.replace(rootFolder, '');
      const parts = relative.split('/').filter(Boolean);

      breadcrumbEl.innerHTML =
        parts.length === 0
          ? 'é¦–é¡µ'
          : `<a href="#" onclick="showFolders('${rootFolder}')">é¦–é¡µ</a> / ` +
            parts
              .map((p, i) => {
                const sub = rootFolder + parts.slice(0, i + 1).join('/') + '/';
                return `<a href="#" onclick="showFolders('${sub}')">${p}</a>`;
              })
              .join(' / ');

      const subFolders = new Set();
      const files = [];

      allFiles.forEach(path => {
        if (!path.startsWith(relative)) return;
        const rest = path.slice(relative.length);
        const parts = rest.split('/');
        if (parts.length === 1) files.push(parts[0]);
        else if (parts[0]) subFolders.add(parts[0]);
      });

      fileListEl.innerHTML = '';

      if (subFolders.size > 0) {
        subFolders.forEach(f => {
          const li = document.createElement('li');
          li.innerHTML = `ğŸ“‚ <a href="#" onclick="showFolders('${currentPath + f + '/'}')">${f}</a>`;
          fileListEl.appendChild(li);
        });
      } else {
        const grouped = {};
        files.forEach(f => {
          const parts = f.split('--');
          let current = grouped;
          for (let i = 0; i < parts.length; i++) {
            const part = parts[i].replace(/\.md$/, '');
            if (!current[part]) current[part] = i === parts.length - 1 ? null : {};
            current = current[part] || {};
          }
        });

        function renderTree(node, container) {
          for (const key in node) {
            const li = document.createElement('li');
            if (node[key] === null) li.textContent = key;
            else {
              li.innerHTML = `<strong>${key}</strong>`;
              const ul = document.createElement('ul');
              renderTree(node[key], ul);
              li.appendChild(ul);
            }
            container.appendChild(li);
          }
        }

        renderTree(grouped, fileListEl);
      }
    }

    loadTree();
  </script>
</body>
</html>

