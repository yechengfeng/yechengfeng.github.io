<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>我的坚果云浏览</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 2em; background: #f8fafc; }
    ul { list-style: none; padding-left: 1em; }
    li { margin: 4px 0; cursor: pointer; }
    li.folder { font-weight: bold; color: #0366d6; }
    li.file { color: #444; }
    a { text-decoration: none; color: inherit; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <h2>我的坚果云浏览器</h2>
  <div id="content"></div>

  <script>
    let rootData = {};
    let pathStack = ["我的坚果云"];

    async function loadData() {
      const res = await fetch("folders.json");
      rootData = await res.json();
      renderFolder(rootData["我的坚果云"]);
    }

    function renderFolder(folder) {
      const container = document.getElementById("content");
      container.innerHTML = "";

      const currentPath = pathStack.join("/");
      const title = document.createElement("h3");
      title.textContent = currentPath;
      container.appendChild(title);

      const backBtn = document.createElement("button");
      backBtn.textContent = "⬅ 返回上一级";
      backBtn.onclick = () => {
        if (pathStack.length > 1) {
          pathStack.pop();
          let node = rootData;
          for (let p of pathStack) node = node[p];
          renderFolder(node);
        }
      };
      container.appendChild(backBtn);

      const ul = document.createElement("ul");

      for (const key in folder) {
        if (typeof folder[key] === "object") {
          const li = document.createElement("li");
          li.className = "folder";
          li.textContent = "📂 " + key;
          li.onclick = () => {
            pathStack.push(key);
            renderFolder(folder[key]);
          };
          ul.appendChild(li);
        } else {
          const li = document.createElement("li");
          li.className = "file";
          li.textContent = "-- " + key;
          ul.appendChild(li);
        }
      }

      container.appendChild(ul);
    }

    loadData();
  </script>
</body>
</html>

