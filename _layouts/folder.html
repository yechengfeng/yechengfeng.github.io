---
layout: default
title: 文件夹内容
---

<style>
body {display:flex;height:100vh;margin:0;font-family:Arial,Helvetica,sans-serif;}
nav {width:260px;background:#1f2937;color:#fff;overflow:auto;}
nav .nav-header {padding:1em;font-size:1.2em;font-weight:bold;background:#111827;text-align:center;}
nav ul {list-style:none;padding:0;margin:0;}
nav li a {display:block;color:#e5e7eb;text-decoration:none;padding:0.5em 1em;}
nav li a:hover, nav li a.active {background:#3b82f6;color:#fff;border-radius:4px;}
main {flex:1;padding:1em;overflow:auto;}
.article-card {display:none;}
.article-card.active {display:block;}
</style>

<nav>
  <div class="nav-header" id="folderTitle">加载中...</div>
  <ul id="navList"></ul>
</nav>

<main id="contentArea">
  <div id="articles"></div>
</main>

<script>
// 获取 ?dir=xxx 参数
function getParam(name){
  return new URLSearchParams(window.location.search).get(name);
}
const folderName = getParam("dir");
document.getElementById("folderTitle").textContent = folderName || "未知文件夹";

// 预加载所有 markdown 文件
const files = [
  {% for f in site.pages %}
    {% if f.path contains '我的坚果云/' %}
      {
        path: "{{ f.path }}",
        name: "{{ f.path | split:'/' | last | replace:'.md','' }}",
        url: "{{ f.url | replace:'/','_' | replace:'.md','' }}",
        content: {{ f.content | jsonify }}
      },
    {% endif %}
  {% endfor %}
];

// 过滤出目标文件夹
const folderFiles = files.filter(f=>f.path.includes(`我的坚果云/${folderName}/`));

const nav = document.getElementById('navList');
const content = document.getElementById('articles');

// 渲染文件导航和内容
folderFiles.forEach(f=>{
  const li=document.createElement('li');
  const a=document.createElement('a');
  a.textContent=f.name;
  a.href="#";
  a.onclick=()=>{
    document.querySelectorAll('.article-card').forEach(c=>c.classList.remove('active'));
    document.querySelectorAll('#navList a').forEach(a=>a.classList.remove('active'));
    a.classList.add('active');
    document.getElementById(f.url).classList.add('active');
    return false;
  };
  li.appendChild(a);
  nav.appendChild(li);

  const div=document.createElement('div');
  div.className='article-card';
  div.id=f.url;
  div.innerHTML=f.content;
  content.appendChild(div);
});

// 默认展示第一个
if(folderFiles.length>0){
  document.getElementById(folderFiles[0].url).classList.add('active');
  nav.querySelector('a').classList.add('active');
} else {
  content.innerHTML="<p>此文件夹暂无内容。</p>";
}
</script>

