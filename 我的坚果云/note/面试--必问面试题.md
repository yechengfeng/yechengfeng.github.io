- kafka的rebalance机制是什么

  - 在Kafka中，当有新消费者加入或者订阅的Topic数发生变化时，会触发Rebalance(再均衡：在同一个消费者组当中，分区的所有权从一个消费者转移到另外一个消费者)机制，Rebalance顾名思义就是重新均衡消费者消费。2022年4月22日

- kafka消息丢失的场景

  - https://juejin.cn/post/7212929901602029605

- kafka是pull 还是push以及优劣

  - https://zhuanlan.zhihu.com/p/524499079

- kafka中zk的作用

  - zookeeper是分布式协调，注意它不是数据库

  - kafka中使用了zoolkeeper的分布式锁和分布式配置及统一命名的分布式协调解决方案.

  - 在kafka的broker集群中的controller的选择，是通过2k的临时节点争抢获得的

  -  brokerID等如果自增的话也是通过zk的节点version实现的全局唯一

  - kafka中broker中的状态数据也是存储在zk中，不过这里要注意，zk不是数据库，所以存储的属于元数据

  - 而新旧版本变化中，就把曾经的offset从Zk中迁移出了zk

- kafka中高性能如何保证

  - 最大的瓶颈依然是IO

  - 虽然broker在持久化数据的时候已经最大鲁丽的使用了磁盘的顺序读写

  - 更进一步的性能优化是0拷贝的使用，

- **rabbitMq的架构设计**

  > RabbitMQ 的架构核心是基于 AMQP 协议，生产者将消息发送到 Exchange，由 Exchange 按照 Routing Key 和 Binding 规则路由到不同的 Queue，消费者从 Queue 消费并确认。
  >  为了保证可靠性，RabbitMQ 提供持久化、ACK 确认、死信队列、发布确认、镜像队列等机制。
  >  在部署架构上，RabbitMQ 支持单机、普通集群、镜像集群，以及通过 Shovel/Federation 实现跨机房高可用。
  >  在业务选型上，一般普通消息用 Direct/Topic，广播用 Fanout，核心业务启用镜像队列，跨地域用 Shovel/Federation。

